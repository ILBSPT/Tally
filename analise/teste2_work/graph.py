import matplotlib.pyplot as plt
from matplotlib.ticker import FormatStrFormatter

work = 1073741824

plt.figure(dpi=300)

files_1 = [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824]
files_128 = [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608]
files_8192 = [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072]

w1 = [1073741828, 1073741856, 1073741856, 1073741952, 1073741952, 1073742336, 1073742336, 1073743872, 1073743872,1073750016, 1073750016, 1073774592, 1073774592, 1073872896, 1073872896, 1074266112, 1074266112, 1075838976, 1075838976, 1082130432, 1082130432, 1107296256,1107296256, 1207959552, 1207959552, 1610612736, 1610612736, 3221225472, 4294967289, 6442450944]
w128 = [1073743872, 1073743872, 1073750016, 1073750016, 1073774592, 1073774592, 1073872896, 1073872896, 1074266112, 1074266112, 1075838976, 1075838976, 1082130432, 1082130432, 1107296256, 1107296256, 1207959552, 1207959552, 1610612736, 1610612736, 3221225472, 4294965760, 6442450944]
w8192 = [1073872896, 1073872896, 1074266112, 1074266112, 1075838976, 1075838976, 1082130432, 1082130432, 1107296256, 1107296256, 1207959552, 1207959552, 1610612736, 1610612736, 3221225472, 4294868992, 6442450944]

fig, ax = plt.subplots()

w1p = [x - work for x in w1]
w128p = [x - work for x in w128]
w8192p = [x - work for x in w8192]

ax.plot(files_1, w1p, label = "1 minithread")
ax.plot(files_128, w128p, label = "128 minithreads")
ax.plot(files_8192, w8192p, label = "8192 minithreads")

ax.set_xscale("log")
ax.legend(loc="upper left")

ax.set_xlabel("Number of metacycles")
ax.set_ylabel("Extra work done")

ax.yaxis.set_major_formatter(FormatStrFormatter('%.1e'))

plt.show()
#plt.savefig('teste2_work_dpi.png', dpi=300)

w1 = [(abs(x - work) / work) * 100 for x in w1]
w128 = [(abs(x - work) / work) * 100 for x in w128]
w8192 = [(abs(x - work) / work) * 100 for x in w8192]

plt.plot(files_1, w1, label = "1 minithread")
plt.plot(files_128, w128, label = "128 minithreads")
plt.plot(files_8192, w8192, label = "8192 minithreads")

plt.xscale("log")
plt.legend(loc="upper left")

plt.xlabel("Number of metacycles")
plt.ylabel("Extra work done %")

plt.show()
