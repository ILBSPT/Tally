import matplotlib.pyplot as plt
from matplotlib.ticker import FormatStrFormatter

files_1 = [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824]
files_128 = [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608]
files_8192 = [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072]

y1 =[0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,31,63,511,1022,8128,16256,127100,254200,1864135,3728270,22369621,44739242,178956970,402653182,894784851]
y128 =[0,0,0,0,0,0,0,0,0,0,384,896,8064,16256,126976,254080,1864064,3728256,22369536,44739200,178956928,402653056,894784768]
y8192 = [0,0,0,0,0,0,0,8192,122880,253952,1859584,3727360,22364160,44736512,178954240,402644992,894779392]

fig, ax = plt.subplots()

ax.plot(files_1, y1, label = "1 minithread")
ax.plot(files_128, y128, label = "128 minithreads")
ax.plot(files_8192, y8192, label = "8192 minithreads")

ax.set_xscale("log")
ax.legend(loc="upper left")

ax.set_xlabel("Number of metacycles")
ax.set_ylabel("Sum of minithread runs skipped")

ax.yaxis.set_major_formatter(FormatStrFormatter('%.1e'))

plt.show()
